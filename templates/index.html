<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <title>Project Samarth — Prototype</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    /* ---------------- Body & Cards ---------------- */
    body {
      padding-top: 40px;
      background: linear-gradient(to right, #f7f9fc, #e0f7fa);
      font-family: 'Segoe UI', sans-serif;
      transition: background 0.3s, color 0.3s;
    }
    .card {
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      border-radius: 12px;
      transition: transform 0.2s, box-shadow 0.2s;
    }
    .card:hover { transform: translateY(-3px); box-shadow:0 6px 16px rgba(0,0,0,0.15);}
    .answer-area { white-space: pre-wrap; font-size:0.95rem; }
    h2,h5,h6 { color: #333; }
    
    /* ---------------- Buttons ---------------- */
    .btn-primary { background-color:#4a90e2; border:none; }
    .btn-primary:hover { background-color:#357ab8; }

    .btn-outline-secondary:hover { background-color:#e0f7fa; }

    /* ---------------- Dark Mode ---------------- */
    body.dark-mode {
      background: linear-gradient(to right, #1e1e2f, #2a2a3f);
      color: #eee;
    }
    body.dark-mode .card { background-color: #2b2b3b; color:#eee; }
    body.dark-mode .btn-primary { background-color:#357ab8; }
    body.dark-mode .btn-primary:hover { background-color:#4a90e2; }
    body.dark-mode .btn-outline-secondary:hover { background-color:#444; color:#eee; }

    /* ---------------- Charts ---------------- */
    canvas { width:100% !important; height:300px !important; }
  </style>
</head>
<body>
<div class="container">
  <div class="row mb-3">
    <div class="col-md-8">
      <h2>Project Samarth — Agri ↔ Climate Q&A (Prototype)</h2>
      <p class="text-muted">Ask about rainfall and crop production. Dynamic charts and multi-year analysis included.</p>
    </div>
    <div class="col-md-4 text-right">
      <button id="toggleTheme" class="btn btn-outline-secondary btn-sm">Toggle Dark Mode</button>
    </div>
  </div>

  <!-- ---------------- Question Form ---------------- -->
  <div class="row mb-3">
    <div class="col-md-12">
      <div class="card p-3 mb-3">
        <form id="qform">
          <div class="form-group">
            <label for="question">Enter your question</label>
            <input type="text" id="question" class="form-control" placeholder='e.g. "Compare average rainfall in Andhra Pradesh and Telangana for last 3 years and list top 2 crops."'/>
          </div>
          <button class="btn btn-primary" type="submit">Ask</button>
          <button id="exampleBtn" class="btn btn-outline-secondary ml-2" type="button">Try Example</button>
        </form>
      </div>
    </div>
  </div>

  <!-- ---------------- Answer & Sources ---------------- -->
  <div class="row">
    <div class="col-md-6">
      <div class="card p-3 mb-3">
        <h5>Answer</h5>
        <div id="answer" class="answer-area"></div>
      </div>
      <div class="card p-3">
        <h6>Provenance / Sources</h6>
        <ul id="sources"></ul>
      </div>
    </div>

    <!-- ---------------- Charts & Top Crops ---------------- -->
    <div class="col-md-6">
      <div class="card p-3 mb-3">
        <h5>Rainfall Chart</h5>
        <canvas id="rainChart"></canvas>
      </div>
      <div class="card p-3 mb-3">
        <h5>Crop Production Trend</h5>
        <canvas id="cropChart"></canvas>
      </div>
      <div class="card p-3">
        <h6>Top Crops</h6>
        <div id="topCrops"></div>
      </div>
    </div>
  </div>

  <footer class="mt-4 text-center text-muted">
    Prototype — replace sample CSVs with real data.gov.in & IMD datasets for production
  </footer>
</div>

<!-- ---------------- JS ---------------- -->
<script src="{{ url_for('static', filename='js/main.js') }}"></script>
</body>
</html>

